</div>
</div>

<script src="/assets/js/libs/split-text.js"></script>
<script src="/assets/js/libs/swup.js"></script>
<script src="/assets/js/libs/swup-progress.js"></script>
<script src="/assets/js/libs/swup-body.js"></script>
<script src="/assets/js/libs/gsap.js"></script>
<script src="/assets/js/libs/scroll-trigger.js"></script>
<script src="/assets/js/libs/lenis.js"></script> 
<script src="/assets/js/animations.js"></script>
<script src="/assets/js/script.js"></script>
<script>
  window.addEventListener('load', function() {
  appMain(); animationMain()
  });
  const swup = new Swup({
    animateHistoryBrowsing: true, 
    plugins: [
      new SwupProgressPlugin(),
      new SwupBodyClassPlugin()
    ]
  });
  swup.hooks.on('page:view', () => {
       appMain(); animationMain()
  }, { before: true });
</script> 
<script src="/assets/js/cookieconsent.js" defer></script>
<script src="/assets/js/cookieconsent-init.js" defer></script>

<script>
  // Konfiguracja Bookero
  var bookero_config = {
    id: '9UmCxEbmleIB',
    container: 'bookero',
    type: 'calendar',
    position: '',
    plugin_css: true,
    lang: 'pl'
  };

  // Załaduj widget
  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://cdn.bookero.pl/plugin/v2/js/bookero-compiled.js';
    d.body.appendChild(s);
  })();

  document.addEventListener('DOMContentLoaded', function() {
    const overlay = document.getElementById('bookero-overlay');
    const openBtn = document.getElementById('open-bookero');
    const closeBtn = document.querySelector('.bookero-close');

    // helper: blokada scrolla bez skoku
    let scrollY = 0;
    function lockScroll() {
      // bieżąca pozycja (Lenis ma własny stan, ale window.scrollY też działa po stop())
      scrollY = window.scrollY || 0;
      document.documentElement.classList.add('popup-open');
      // ustawiamy ujemny top, żeby „zamrozić” widok
      document.body.style.setProperty('--scroll-lock-top', `-${scrollY}px`);
      document.body.classList.add('scroll-lock');

      // wyłącz Lenisa, jeśli jest
      if (window.lenis && typeof window.lenis.stop === 'function') {
        window.lenis.stop();
      }
    }
    function unlockScroll() {
      document.body.classList.remove('scroll-lock');
      document.body.style.removeProperty('--scroll-lock-top');
      document.documentElement.classList.remove('popup-open');

      // przywróć Lenisa i pozycję
      if (window.lenis && typeof window.lenis.start === 'function') {
        window.lenis.start();
        // bez animacji, od razu do miejsca
        if (typeof window.lenis.scrollTo === 'function') {
          window.lenis.scrollTo(scrollY, { immediate: true });
        }
      } else {
        window.scrollTo(0, scrollY);
      }
    }

    function openPopup() {
      overlay.classList.add('active');
      lockScroll();
    }
    function closePopup() {
      overlay.classList.remove('active');
      unlockScroll();
    }

    openBtn.addEventListener('click', openPopup);
    closeBtn.addEventListener('click', closePopup);

    // klik w tło
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) closePopup();
    });

    // klawisz Esc
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && overlay.classList.contains('active')) {
        closePopup();
      }
    });
  });
</script>

  
</body>
</html>